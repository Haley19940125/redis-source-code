## redis源码—简单动态字符串SDS

SDS是redis自己构建的简单动态字符串。</br>
源码的位置是在sds.h中。（Redis版本为4.0.8）
### SDS的原理
- 原理很简单，头部中记录了已经使用的长度和总的分配长度（之前的版本为记录剩余长度）。

- 与c语言中的字符串相比：
  - 获取字符串长度的复杂度</br>
    c语言中的字符串并不记录自身的长度，要遍历获取，所以时间复杂度(n)。</br>
    SDS在len的属性中记录了SDS的长度。时间复杂度从O(n)降到O(1)。
  - 杜绝缓冲区溢出
    这也是c语言中字符串记录长度导致的。SDS是动态分配空间的，不会出现缓冲区溢出情况。
  - 减少修改字符串时带来的内存重分配次数
    想追加字符串时不需要像单纯C语言那样重新开辟一块空间然后将原字符串和追加内容一起拷贝过去，而是直接将其添加到SDS未分配的空间中，当然，遇到剩余未分配空间不足的情况则需要进行扩容。
  - 二进制安全。